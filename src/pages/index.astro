---
import Layout from "../server/layouts/base.astro";
import ShareNav from "../server/components/share-nav.astro";
---

<Layout title="No fullbleed">
  <div data-reactroot data-article-type="no-full-width-graphics">
    <div id="n-exponea-top-slot"></div>
    <div class="topper"></div>

    <div class="grid" data-section="copy">
      <div class="grid__lhr">
        <ShareNav />
      </div>

      <div class="grid__content article">
        <div class="article__image"></div>
        <div class="article__content" id="article-content">
          <lorem-ipsum paras="4" replace></lorem-ipsum>
          <img src="https://placehold.co/800x400" />
          <lorem-ipsum paras="5" replace></lorem-ipsum>
          <img src="https://placehold.co/800x400" />
          <lorem-ipsum paras="6" replace></lorem-ipsum>
        </div>
        <div class="article__tools">article tools</div>
      </div>

      <div class="grid__rhr" id="article-rhr">
        <concept-list class="concepts"></concept-list>
      </div>
    </div>

    <div class="grid" data-section="onward">
      <div class="grid__content">
        <div class="onward"></div>
        <div class="promoted"></div>
        <concept-list class="concepts"></concept-list>
      </div>
      <div class="grid__rhr"></div>
    </div>

    <section class="grid" data-section="comments">
      <div class="grid__content comments">
        <div class="comments__content" id="comments-content">
          <coral-comments></coral-comments>
        </div>
      </div>
      <div class="grid__rhr" id="comments-rhr"></div>
    </section>
  </div>
</Layout>

<script>
// This code is basically a very brief version of the Extensible Frontends 'runtime' module.
// It fetches the JS and CSS for the pro-stocks-widget component and loads them onto the page, using
// the 'init' and 'mount' functions exposed by the component.
//
// See https://github.com/egargan-ft/ef-runtime/blob/main/packages/ef-runtime-client/src/EFRuntime/EFRuntime.ts
  const stocksWidgetJsUrl = "https://pro-stocks-widget-staging.ft.com/js";
  const stocksWidgetCssUrl = "https://pro-stocks-widget-staging.ft.com/css";

  const componentScript = document.createElement("script");
  componentScript.type = "module";
  componentScript.innerHTML = `
import * as component from "${stocksWidgetJsUrl}";
if (component.init) component.init();
if (component.mount) component.mount();
`;

  document.body.append(componentScript);

  const componentCss = document.createElement("link");
  componentCss.rel = "stylesheet";
  componentCss.href = stocksWidgetCssUrl;
  document.head.append(componentCss);
</script>
